var gsplatSourceVS = `
attribute vertex_position: vec3f;
attribute vertex_id_attrib: u32;
uniform numSplats: u32;
#ifdef STORAGE_ORDER
	var<storage, read> splatOrder: array<u32>;
#else
	var splatOrder: texture_2d<u32>;
#endif
fn initSource(source: ptr<function, SplatSource>) -> bool {
	(*source).order = vertex_id_attrib + u32(vertex_position.z);
	if ((*source).order >= uniform.numSplats) {
		return false;
	}
	var splatId: u32;
	#ifdef STORAGE_ORDER
		splatId = splatOrder[(*source).order];
	#else
		let uv = vec2u((*source).order % uniform.splatTextureSize, (*source).order / uniform.splatTextureSize);
		splatId = textureLoad(splatOrder, vec2i(uv), 0).r;
	#endif
	setSplat(splatId);
	(*source).cornerUV = vertex_position.xy;
	return true;
}
`;

export { gsplatSourceVS as default };
