class UploadStream {
		destroy() {
				this._deviceLostEvent?.off();
				this._deviceLostEvent = null;
				this.impl?.destroy();
				this.impl = null;
		}
		upload(data, target, offset = 0, size = data.length) {
				this.impl?.upload(data, target, offset, size);
		}
		_onDeviceLost() {
				this.impl?._onDeviceLost?.();
		}
		constructor(device, useSingleBuffer = false){
				this._deviceLostEvent = null;
				this.device = device;
				this.useSingleBuffer = useSingleBuffer;
				this.impl = device.createUploadStreamImpl(this);
				this._deviceLostEvent = this.device.on('devicelost', this._onDeviceLost, this);
		}
}

export { UploadStream };
